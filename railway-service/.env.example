# ============================================
# HalloWa.id Backend Environment Variables
# ============================================
# Copy this to .env and fill with your actual values
#
# üìã Quick Setup Checklist:
# [ ] 1. Supabase credentials (REQUIRED)
# [ ] 2. Redis REST API credentials (REQUIRED)
# [ ] 3. Redis TCP URL for BullMQ (REQUIRED for queue)
# [ ] 4. Internal API key (REQUIRED)
# [ ] 5. Monitoring credentials (OPTIONAL)
# ============================================

# ============================================
# DATABASE - Supabase PostgreSQL (REQUIRED)
# ============================================
# Get from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# ============================================
# REDIS - Upstash (REQUIRED)
# ============================================
# REST API - for simple operations (QR codes, rate limiting, cache)
# Get from: https://console.upstash.com/redis/YOUR_REDIS > REST API tab
UPSTASH_REDIS_REST_URL=https://your-redis-instance.upstash.io
UPSTASH_REDIS_REST_TOKEN=your_redis_token_here

# üÜï TCP Connection - for BullMQ queue (HIGH PERFORMANCE)
# Get from: https://console.upstash.com/redis/YOUR_REDIS > Details > "Redis URL"
# Format: rediss://default:password@host.upstash.io:6379
# ‚ö†Ô∏è IMPORTANT: This is DIFFERENT from REST_URL above!
UPSTASH_REDIS_URL=rediss://default:your_password@your-redis-instance.upstash.io:6379

# ============================================
# SERVER CONFIGURATION
# ============================================
# Port for main service (auto-set by Railway, default: 3000)
PORT=3000

# Environment (development, staging, production)
NODE_ENV=production

# Logging Level (error, warn, info, debug)
LOG_LEVEL=info

# ============================================
# SECURITY
# ============================================
# Internal API Key for Edge Function ‚Üî Railway communication (REQUIRED)
# Generate with: openssl rand -base64 32
# Minimum 32 characters for security
INTERNAL_API_KEY=your_internal_api_key_here_minimum_32_characters

# ============================================
# MONITORING & DASHBOARD (OPTIONAL)
# ============================================
# BullMQ Dashboard Configuration
# Access dashboard at: http://localhost:3001/admin/queues

# Port for monitoring dashboard (separate from main app)
MONITORING_PORT=3001

# Dashboard authentication credentials
# ‚ö†Ô∏è CHANGE THESE IN PRODUCTION!
ADMIN_USERNAME=admin
ADMIN_PASSWORD=your_secure_admin_password_here

# ============================================
# OPTIONAL: Session Configuration
# ============================================
# Session timeout in milliseconds (default: 1 hour)
# SESSION_TIMEOUT=3600000

# ============================================
# NOTES:
# ============================================
#
# 1. UPSTASH_REDIS_URL vs UPSTASH_REDIS_REST_URL:
#    - Both connect to the SAME Redis instance
#    - REST_URL: HTTP-based (simple operations, serverless-friendly)
#    - REDIS_URL: TCP-based (high performance, required for BullMQ)
#
# 2. How to get UPSTASH_REDIS_URL:
#    a. Login to https://console.upstash.com/
#    b. Select your Redis database
#    c. Go to "Details" or "Connect" tab
#    d. Look for "Redis URL" or "Connection String (Node.js/ioredis)"
#    e. Copy the URL starting with "redis://" or "rediss://"
#
# 3. If you don't have UPSTASH_REDIS_URL:
#    - BullMQ queue will be disabled
#    - System will fallback to polling mode (slower, less efficient)
#    - REST API operations (QR codes, rate limiting) will still work
#
# 4. Monitoring Dashboard:
#    - Optional: Can run standalone or integrated
#    - Provides visual queue monitoring
#    - Requires ADMIN_USERNAME and ADMIN_PASSWORD
#    - Access at: http://your-server:3001/admin/queues
#
# 5. Security Best Practices:
#    - Never commit .env to Git (already in .gitignore)
#    - Use strong passwords (minimum 32 characters)
#    - Rotate INTERNAL_API_KEY regularly
#    - Change default ADMIN_PASSWORD in production
#    - Enable firewall on VPS (ufw, iptables)
#
# 6. Testing:
#    - Use development values for local testing
#    - Create separate .env.staging for staging environment
#    - Never use production credentials in development
#
# ============================================
